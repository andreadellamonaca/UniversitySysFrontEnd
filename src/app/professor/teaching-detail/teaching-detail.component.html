<app-profnavbar></app-profnavbar>
<div class="card" *ngIf="teaching">
  <div class="card-body">
    <h3>Nome Insegnamento: {{ teaching.name }}</h3>
    <p>CFU: {{ teaching.cfu }}</p>
  </div>
  <div class="card-body">
    <h3>Lectures:</h3>
    <div *ngIf="lectures.length > 0">
      <div class="card" *ngFor="let l of lectures">
        <div class="card-body">
          <p>
            {{ l.date }} hour: {{ l.hour }}
            <button (click)="toggleHide(l)" class="btn btn-sm btn-secondary">Show teaching material</button>
          </p>
          <p>Classroom: {{ l.classroom.name }}</p>
          <div *ngIf="l.hide_material">
            <ul  *ngFor="let tm of l.tmaterials">
              <li>Link: <a href="{{ tm. link }}">{{ tm.name }}    </a>
                <button (click)="removematerial(l, tm)" class="btn btn-sm btn-secondary">Delete</button>
              </li>
            </ul>
          </div>
          <label>Choose the type of teaching material you want to upload:</label>
          <select name="upload_type" [(ngModel)]="t_material.type">
            <option value="none"></option>
            <option value="Link">Link</option>
            <option value="File">File</option>
          </select>
          <div *ngIf="t_material.type ==='Link'">
            <form (submit)="uploadLink(l.idLecture)">
              <div class="form-group">
                <label>Resource name:</label>
                <input type="text" name="resource_name" class="form-control" [(ngModel)]="t_material.name">
              </div>
              <div class="form-group">
                <label>Link:</label>
                <input type="text" name="link" class="form-control" [(ngModel)]="t_material.link">
              </div>
              <button [disabled]="!(t_material.name) || !(t_material.link)" class="btn btn-sm btn-secondary">Add Link</button>
            </form>
          </div>
          <div *ngIf="t_material.type ==='File'">
            <input type="file" (change)="getFile($event)" class="form-control" id ="myFileField"/>
            <button  mat-raised-button color="primary" class="add-files-btn" (click)="uploadFile(l.idLecture)">Add Files</button>
          </div>

        </div>
      </div>
    </div>
    <div *ngIf="lectures.length == 0"><h4>You do not have lectures!</h4></div>
  </div>
</div>
